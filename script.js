// Language translations
const translations = {
    zh: {
        // Navigation
        'logo': '日本包车服务',
        'nav-home': '首页',
        'nav-services': '服务',
        'nav-destinations': '目的地',
        'nav-about': '关于我们',
        'nav-contact': '联系我们',
        
        // Hero Section
        'hero-title': '探索日本之美',
        'hero-subtitle': '专业包车服务，定制您的完美旅程',
        'hero-description': '我们提供专业的日本包车服务，为您量身定制独特的旅行体验。无论您想探索东京的繁华都市，还是感受京都的古韵风情，我们都能为您提供最优质的服务。',
        'hero-btn-primary': '立即预订',
        'hero-btn-secondary': '了解更多',
        
        // Services Section
        'services-title': '我们的服务',
        'services-subtitle': '为您提供全方位的日本旅行解决方案',
        'service-1-title': '包车服务',
        'service-1-desc': '舒适豪华的车辆，经验丰富的司机，让您的旅程更加安心舒适。',
        'service-2-title': '行程定制',
        'service-2-desc': '根据您的兴趣和需求，量身定制专属的日本旅行路线。',
        'service-3-title': '多语言服务',
        'service-3-desc': '提供中文、日文、英文专业导游服务，消除语言障碍。',
        'service-4-title': '24小时服务',
        'service-4-desc': '全天候客户服务，随时为您解决旅行中的各种问题。',
        
        // Destinations Section
        'destinations-title': '热门目的地',
        'destinations-subtitle': '探索日本最受欢迎的旅游景点',
        'dest-1-title': '东京',
        'dest-1-desc': '现代与传统完美融合的都市，体验日本的前沿科技和传统文化。',
        'dest-2-title': '京都',
        'dest-2-desc': '千年古都，感受日本传统文化的精髓和禅意之美。',
        'dest-3-title': '大阪',
        'dest-3-desc': '美食之都，品尝最地道的日本料理和体验关西文化。',
        'dest-4-title': '北海道',
        'dest-4-desc': '自然风光秀丽，四季景色各异，是放松身心的理想之地。',
        
        // About Section
        'about-title': '关于我们',
        'about-desc': '我们是一家专业的日本包车服务公司，拥有多年的行业经验和专业的服务团队。我们致力于为每一位客户提供最优质的旅行体验，让您的日本之旅成为难忘的回忆。',
        'about-feature-1': '专业认证司机',
        'about-feature-2': '豪华舒适车辆',
        'about-feature-3': '24小时客户服务',
        'about-feature-4': '个性化定制服务',
        
        // Contact Section
        'contact-title': '联系我们',
        'contact-subtitle': '准备开始您的日本之旅了吗？立即联系我们获取更多信息',
        'contact-phone-title': '电话',
        'contact-email-title': '邮箱',
        'contact-address-title': '地址',
        'contact-address': '东京都港区六本木1-1-1',
        'form-name': '姓名',
        'form-email': '邮箱',
        'form-phone': '电话',
        'form-message': '留言',
        'form-submit': '发送消息',
        
        // Footer
        'footer-desc': '专业的日本包车服务，为您提供最优质的旅行体验。',
        'footer-services-title': '服务',
        'footer-service-1': '包车服务',
        'footer-service-2': '行程定制',
        'footer-service-3': '多语言服务',
        'footer-service-4': '24小时服务',
        'footer-destinations-title': '目的地',
        'footer-dest-1': '东京',
        'footer-dest-2': '京都',
        'footer-dest-3': '大阪',
        'footer-dest-4': '北海道',
        'footer-contact-title': '联系方式',
        'footer-rights': '保留所有权利'
    },
    
    ja: {
        // Navigation
        'logo': '日本チャウファーサービス',
        'nav-home': 'ホーム',
        'nav-services': 'サービス',
        'nav-destinations': '目的地',
        'nav-about': '私たちについて',
        'nav-contact': 'お問い合わせ',
        
        // Hero Section
        'hero-title': '日本の美を探索',
        'hero-subtitle': 'プロのチャウファーサービスで、完璧な旅をカスタマイズ',
        'hero-description': '私たちはプロの日本チャウファーサービスを提供し、お客様に合わせたユニークな旅行体験をカスタマイズします。東京の賑やかな都市を探索したい方も、京都の古い魅力を感じたい方も、最高のサービスを提供いたします。',
        'hero-btn-primary': '今すぐ予約',
        'hero-btn-secondary': '詳細を見る',
        
        // Services Section
        'services-title': '私たちのサービス',
        'services-subtitle': '日本旅行の包括的なソリューションを提供',
        'service-1-title': 'チャウファーサービス',
        'service-1-desc': '快適で豪華な車両と経験豊富なドライバーで、安心で快適な旅を提供します。',
        'service-2-title': '旅程カスタマイズ',
        'service-2-desc': 'お客様の興味とニーズに基づいて、専用の日本旅行ルートをカスタマイズします。',
        'service-3-title': '多言語サービス',
        'service-3-desc': '中国語、日本語、英語のプロガイドサービスを提供し、言語の壁を取り除きます。',
        'service-4-title': '24時間サービス',
        'service-4-desc': '24時間365日のカスタマーサービスで、旅行中のあらゆる問題を解決します。',
        
        // Destinations Section
        'destinations-title': '人気の目的地',
        'destinations-subtitle': '日本で最も人気の観光スポットを探索',
        'dest-1-title': '東京',
        'dest-1-desc': '現代と伝統が完璧に融合した都市で、日本の最先端技術と伝統文化を体験できます。',
        'dest-2-title': '京都',
        'dest-2-desc': '千年の古都で、日本伝統文化の真髄と禅の美しさを感じることができます。',
        'dest-3-title': '大阪',
        'dest-3-desc': '美食の都で、最も本格的な日本料理を味わい、関西文化を体験できます。',
        'dest-4-title': '北海道',
        'dest-4-desc': '美しい自然風景と四季折々の景色で、心身をリラックスさせる理想的な場所です。',
        
        // About Section
        'about-title': '私たちについて',
        'about-desc': '私たちはプロの日本チャウファーサービス会社で、長年の業界経験とプロのサービスチームを持っています。すべてのお客様に最高の旅行体験を提供し、日本の旅を忘れられない思い出にすることに専念しています。',
        'about-feature-1': 'プロ認定ドライバー',
        'about-feature-2': '豪華で快適な車両',
        'about-feature-3': '24時間カスタマーサービス',
        'about-feature-4': '個別カスタマイズサービス',
        
        // Contact Section
        'contact-title': 'お問い合わせ',
        'contact-subtitle': '日本の旅を始める準備はできましたか？詳細情報は今すぐお問い合わせください',
        'contact-phone-title': '電話',
        'contact-email-title': 'メール',
        'contact-address-title': '住所',
        'contact-address': '東京都港区六本木1-1-1',
        'form-name': 'お名前',
        'form-email': 'メールアドレス',
        'form-phone': '電話番号',
        'form-message': 'メッセージ',
        'form-submit': 'メッセージを送信',
        
        // Footer
        'footer-desc': 'プロの日本チャウファーサービスで、最高の旅行体験を提供します。',
        'footer-services-title': 'サービス',
        'footer-service-1': 'チャウファーサービス',
        'footer-service-2': '旅程カスタマイズ',
        'footer-service-3': '多言語サービス',
        'footer-service-4': '24時間サービス',
        'footer-destinations-title': '目的地',
        'footer-dest-1': '東京',
        'footer-dest-2': '京都',
        'footer-dest-3': '大阪',
        'footer-dest-4': '北海道',
        'footer-contact-title': '連絡先',
        'footer-rights': 'すべての権利を保有'
    },
    
    en: {
        // Navigation
        'logo': 'Japan Chauffeur Service',
        'nav-home': 'Home',
        'nav-services': 'Services',
        'nav-destinations': 'Destinations',
        'nav-about': 'About Us',
        'nav-contact': 'Contact',
        
        // Hero Section
        'hero-title': 'Discover the Beauty of Japan',
        'hero-subtitle': 'Professional Chauffeur Service, Customize Your Perfect Journey',
        'hero-description': 'We provide professional Japan chauffeur services, tailoring unique travel experiences for you. Whether you want to explore Tokyo\'s bustling metropolis or experience Kyoto\'s ancient charm, we can provide you with the highest quality service.',
        'hero-btn-primary': 'Book Now',
        'hero-btn-secondary': 'Learn More',
        
        // Services Section
        'services-title': 'Our Services',
        'services-subtitle': 'Providing comprehensive solutions for your Japan travel',
        'service-1-title': 'Chauffeur Service',
        'service-1-desc': 'Comfortable and luxurious vehicles with experienced drivers to make your journey more comfortable and secure.',
        'service-2-title': 'Itinerary Customization',
        'service-2-desc': 'Tailor-made Japan travel routes based on your interests and needs.',
        'service-3-title': 'Multi-language Service',
        'service-3-desc': 'Professional guide services in Chinese, Japanese, and English to eliminate language barriers.',
        'service-4-title': '24-Hour Service',
        'service-4-desc': 'Round-the-clock customer service to solve any travel issues at any time.',
        
        // Destinations Section
        'destinations-title': 'Popular Destinations',
        'destinations-subtitle': 'Explore Japan\'s most popular tourist attractions',
        'dest-1-title': 'Tokyo',
        'dest-1-desc': 'A city where modernity and tradition perfectly blend, experiencing Japan\'s cutting-edge technology and traditional culture.',
        'dest-2-title': 'Kyoto',
        'dest-2-desc': 'The ancient capital of a thousand years, feeling the essence of Japanese traditional culture and the beauty of Zen.',
        'dest-3-title': 'Osaka',
        'dest-3-desc': 'The food capital, tasting the most authentic Japanese cuisine and experiencing Kansai culture.',
        'dest-4-title': 'Hokkaido',
        'dest-4-desc': 'Beautiful natural scenery with different views in each season, an ideal place to relax body and mind.',
        
        // About Section
        'about-title': 'About Us',
        'about-desc': 'We are a professional Japan chauffeur service company with years of industry experience and a professional service team. We are committed to providing the highest quality travel experience for every customer, making your Japan journey an unforgettable memory.',
        'about-feature-1': 'Professional Certified Drivers',
        'about-feature-2': 'Luxurious Comfortable Vehicles',
        'about-feature-3': '24-Hour Customer Service',
        'about-feature-4': 'Personalized Customized Service',
        
        // Contact Section
        'contact-title': 'Contact Us',
        'contact-subtitle': 'Ready to start your Japan journey? Contact us now for more information',
        'contact-phone-title': 'Phone',
        'contact-email-title': 'Email',
        'contact-address-title': 'Address',
        'contact-address': '1-1-1 Roppongi, Minato-ku, Tokyo',
        'form-name': 'Name',
        'form-email': 'Email',
        'form-phone': 'Phone',
        'form-message': 'Message',
        'form-submit': 'Send Message',
        
        // Footer
        'footer-desc': 'Professional Japan chauffeur service, providing you with the highest quality travel experience.',
        'footer-services-title': 'Services',
        'footer-service-1': 'Chauffeur Service',
        'footer-service-2': 'Itinerary Customization',
        'footer-service-3': 'Multi-language Service',
        'footer-service-4': '24-Hour Service',
        'footer-destinations-title': 'Destinations',
        'footer-dest-1': 'Tokyo',
        'footer-dest-2': 'Kyoto',
        'footer-dest-3': 'Osaka',
        'footer-dest-4': 'Hokkaido',
        'footer-contact-title': 'Contact',
        'footer-rights': 'All rights reserved'
    }
};

// Language switching functionality
class LanguageSwitcher {
    constructor() {
        this.currentLang = localStorage.getItem('selectedLanguage') || 'zh';
        this.init();
    }
    
    init() {
        this.setLanguage(this.currentLang);
        this.bindEvents();
        this.updateLanguageButtons();
    }
    
    bindEvents() {
        // Language button clicks
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const lang = e.target.getAttribute('data-lang');
                this.setLanguage(lang);
            });
        });
        
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    const headerHeight = document.querySelector('.header').offsetHeight;
                    const targetPosition = targetElement.offsetTop - headerHeight;
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        // Form submission
        const contactForm = document.querySelector('.contact-form form');
        if (contactForm) {
            contactForm.addEventListener('submit', (e) => {
                e.preventDefault();
                this.handleFormSubmission();
            });
        }
        
        // Mobile menu toggle
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const navMenu = document.querySelector('.nav-menu');
        
        if (mobileMenuToggle && navMenu) {
            mobileMenuToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                mobileMenuToggle.classList.toggle('active');
            });
        }
        
        // Header scroll effect
        window.addEventListener('scroll', () => {
            const header = document.querySelector('.header');
            if (window.scrollY > 100) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });
        
        // Intersection Observer for animations
        this.initScrollAnimations();
    }
    
    setLanguage(lang) {
        if (!translations[lang]) return;
        
        this.currentLang = lang;
        localStorage.setItem('selectedLanguage', lang);
        
        // Update body data attribute for font family
        document.body.setAttribute('data-lang', lang);
        
        // Update document title
        document.title = translations[lang]['logo'] + ' - ' + translations[lang]['hero-subtitle'];
        
        // Update all translatable elements
        document.querySelectorAll('[data-translate]').forEach(element => {
            const key = element.getAttribute('data-translate');
            if (translations[lang][key]) {
                element.textContent = translations[lang][key];
            }
        });
        
        // Update placeholder texts
        document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
            const key = element.getAttribute('data-translate-placeholder');
            if (translations[lang][key]) {
                element.placeholder = translations[lang][key];
            }
        });
        
        this.updateLanguageButtons();
    }
    
    updateLanguageButtons() {
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.getAttribute('data-lang') === this.currentLang) {
                btn.classList.add('active');
            }
        });
    }
    
    handleFormSubmission() {
        const form = document.querySelector('.contact-form form');
        const submitBtn = form.querySelector('button[type="submit"]');
        const originalText = submitBtn.textContent;
        
        // Show loading state
        submitBtn.textContent = this.currentLang === 'zh' ? '发送中...' : 
                               this.currentLang === 'ja' ? '送信中...' : 'Sending...';
        submitBtn.disabled = true;
        
        // Simulate form submission (replace with actual form handling)
        setTimeout(() => {
            // Show success message
            const successMessage = this.currentLang === 'zh' ? '消息发送成功！' : 
                                  this.currentLang === 'ja' ? 'メッセージが正常に送信されました！' : 
                                  'Message sent successfully!';
            
            alert(successMessage);
            
            // Reset form
            form.reset();
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
        }, 2000);
    }
    
    initScrollAnimations() {
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animated');
                }
            });
        }, observerOptions);
        
        // Observe elements for animation
        document.querySelectorAll('.service-card, .destination-card, .about-text, .contact-form').forEach(el => {
            el.classList.add('animate-on-scroll');
            observer.observe(el);
        });
    }
}

// Utility functions
const utils = {
    // Debounce function for performance optimization
    debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    },
    
    // Format phone number
    formatPhoneNumber(phone) {
        return phone.replace(/(\d{3})(\d{4})(\d{4})/, '$1-$2-$3');
    },
    
    // Validate email
    validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    },
    
    // Show notification
    showNotification(message, type = 'success') {
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.textContent = message;
        
        // Add styles
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${type === 'success' ? '#10b981' : '#ef4444'};
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            z-index: 10000;
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
        `;
        
        document.body.appendChild(notification);
        
        // Animate in
        setTimeout(() => {
            notification.style.transform = 'translateX(0)';
        }, 100);
        
        // Remove after 3 seconds
        setTimeout(() => {
            notification.style.transform = 'translateX(100%)';
            setTimeout(() => {
                document.body.removeChild(notification);
            }, 300);
        }, 3000);
    }
};

// Initialize the application
document.addEventListener('DOMContentLoaded', () => {
    // Initialize language switcher
    new LanguageSwitcher();
    
    // Add loading animation
    document.body.classList.add('loaded');
    
    // Preload images for better performance
    const images = document.querySelectorAll('img[data-src]');
    const imageObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.classList.remove('lazy');
                imageObserver.unobserve(img);
            }
        });
    });
    
    images.forEach(img => imageObserver.observe(img));
    
    // Add keyboard navigation support
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Tab') {
            document.body.classList.add('keyboard-navigation');
        }
    });
    
    document.addEventListener('mousedown', () => {
        document.body.classList.remove('keyboard-navigation');
    });
});

// Export for potential module usage
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { LanguageSwitcher, utils };
}
